import React, { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Progress } from '@/components/ui/progress';
import { Badge } from '@/components/ui/badge';
import Icon from '@/components/ui/icon';
import { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';
import { Label } from '@/components/ui/label';

// Типы данных
interface Question {
  id: number;
  question: string;
  options: string[];
  correctAnswer: number;
  explanation: string;
  category: string;
}

interface TestResult {
  id: number;
  date: string;
  score: number;
  totalQuestions: number;
  category: string;
  timeSpent: number;
}

const Index = () => {
  // Состояние приложения
  const [currentView, setCurrentView] = useState<'dashboard' | 'test' | 'results'>('dashboard');
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
  const [selectedAnswers, setSelectedAnswers] = useState<number[]>([]);
  const [showResults, setShowResults] = useState(false);
  const [testStartTime, setTestStartTime] = useState<number>(0);
  const [currentAnswer, setCurrentAnswer] = useState<number | null>(null);

  // Вопросы по строительству и информационным технологиям
  const questions: Question[] = [
    {
      id: 1,
      question: "Что включает в себя управление информацией в строительном проекте?",
      options: [
        "Только сбор данных о строительных материалах.",
        "Организацию и управление данными, связанными со строительным проектом: сбор, хранение, обработку и передачу информации между участниками проекта, а также использование информационных технологий для координации и контроля строительных работ.",
        "Исключительно передачу информации заказчику.",
        "Только хранение документации в бумажном виде."
      ],
      correctAnswer: 1,
      explanation: "Управление информацией в строительстве — это комплексный процесс, включающий сбор, хранение, обработку и передачу данных между всеми участниками проекта с использованием современных информационных технологий.",
      category: "Управление информацией"
    },
    {
      id: 2,
      question: "Какие процессы связаны с управлением данными в строительстве?",
      options: [
        "Только процесс составления смет.",
        "Сбор и систематизация данных на всех этапах жизненного цикла объекта, структурирование данных и внесение их в информационную модель, документирование и архивация, обновление и корректировка информации в процессе реализации проекта.",
        "Только процесс передачи данных в надзорные органы.",
        "Процессы, не связанные с анализом и обработкой данных."
      ],
      correctAnswer: 1,
      explanation: "Управление данными в строительстве охватывает весь жизненный цикл объекта: от сбора первичных данных до их архивации и обновления в процессе эксплуатации.",
      category: "Управление данными"
    },
    {
      id: 3,
      question: "Что такое BIM-технологии и как они применяются в строительстве?",
      options: [
        "Технологии, не связанные со строительством.",
        "Технологии, которые позволяют создавать и использовать единую цифровую модель объекта строительства. Они применяются для визуализации и анализа объектов, оптимизации процессов проектирования и строительства, управления информацией на всех этапах жизненного цикла объекта.",
        "Методы расчёта нагрузки на фундамент.",
        "Системы для автоматического составления смет."
      ],
      correctAnswer: 1,
      explanation: "BIM (Building Information Modeling) — это технология создания и использования единой цифровой модели объекта, которая содержит всю необходимую информацию о конструкции, материалах, инженерных системах и других параметрах объекта.",
      category: "BIM-технологии"
    },
    {
      id: 4,
      question: "В чём преимущество использования облачных вычислений в строительстве?",
      options: [
        "Они требуют значительных локальных вычислительных мощностей.",
        "Они позволяют упростить обмен информацией между участниками проекта, обеспечить доступ к данным и приложениям из любой точки мира, снизить затраты на приобретение и обслуживание собственного серверного оборудования, гибко масштабировать вычислительные ресурсы.",
        "Облачные вычисления применимы только в IT-сфере.",
        "Их использование приводит к увеличению затрат на инфраструктуру."
      ],
      correctAnswer: 1,
      explanation: "Облачные вычисления в строительстве обеспечивают гибкость, экономию на оборудовании и возможность удаленной работы с проектными данными для всех участников проекта.",
      category: "Облачные технологии"
    },
    {
      id: 5,
      question: "Какие задачи позволяют решать информационные модели объектов капитального строительства?",
      options: [
        "Только расчёт стоимости строительства.",
        "Визуализация проекта, анализ коллизий между элементами проекта, расчёт объёмов работ и материалов, оптимизация проектных решений, подготовка проектной документации, координация работы подрядчиков, управление объектом на всех этапах жизненного цикла.",
        "Только создание 3D-моделей зданий.",
        "Только контроль соблюдения строительных норм."
      ],
      correctAnswer: 1,
      explanation: "Информационные модели объектов строительства решают широкий спектр задач на всех этапах жизненного цикла — от проектирования до эксплуатации и демонтажа объекта.",
      category: "Информационное моделирование"
    },
    {
      id: 6,
      question: "Что такое системный анализ в строительстве?",
      options: [
        "Процесс изучения отдельных компонентов без учёта их взаимодействия.",
        "Процесс исследования и оценки строительных систем с целью выявления их свойств, структуры и поведения для оптимизации процессов проектирования и строительства.",
        "Анализ только информационных систем.",
        "Процесс, используемый только в сфере IT."
      ],
      correctAnswer: 1,
      explanation: "Системный анализ в строительстве позволяет комплексно исследовать строительные системы, учитывая их многогранность и сложность для достижения поставленных целей.",
      category: "Системный анализ"
    },
    {
      id: 7,
      question: "Какие общие требования предъявляются к современным вычислительным системам?",
      options: [
        "Только увеличение объёма оперативной памяти.",
        "Повышение быстродействия и снижение стоимости арифметических операций и единицы памяти, разработка программных средств общения с ЭВМ, возможность решения сложных прикладных и математических задач.",
        "Отсутствие необходимости в программных средствах.",
        "Ограничение возможностей решения сложных задач."
      ],
      correctAnswer: 1,
      explanation: "Современные вычислительные системы должны обеспечивать высокое быстродействие при низкой стоимости, иметь удобные средства взаимодействия и возможность решения сложных задач.",
      category: "Вычислительные системы"
    },
    {
      id: 8,
      question: "Что такое архитектура компьютерных сетей?",
      options: [
        "Совокупность только физических компонентов сети.",
        "Сложная структура, которая включает различные сервисы и протоколы для обеспечения работы Интернета и других глобальных сервисов, элементы сети, средства объединения устройств, системы адресации и механизмы управления.",
        "Набор правил для работы с локальными сетями.",
        "Система, не включающая механизмы управления."
      ],
      correctAnswer: 1,
      explanation: "Архитектура компьютерных сетей представляет собой комплексную структуру, объединяющую различные компоненты и технологии для обеспечения эффективного взаимодействия между устройствами.",
      category: "Сетевые технологии"
    },
    {
      id: 9,
      question: "Как автоматизированные системы помогают в управлении ресурсами и процессами?",
      options: [
        "Не оказывают никакого влияния.",
        "Помогают повысить эффективность и точность работы, сократить время на выполнение рутинных задач, уменьшить вероятность ошибок, оптимизировать использование материалов, техники и рабочей силы.",
        "Используются только для учёта рабочего времени.",
        "Помогают только в планировании закупок."
      ],
      correctAnswer: 1,
      explanation: "Автоматизированные системы значительно повышают эффективность управления за счет автоматизации рутинных процессов, снижения ошибок и оптимизации использования ресурсов.",
      category: "Автоматизация"
    },
    {
      id: 10,
      question: "В чём роль систем искусственного интеллекта в управлении строительством?",
      options: [
        "ИИ не используется в строительной отрасли.",
        "ИИ помогает анализировать большие объёмы данных, оптимизировать проектные и строительные процессы, прогнозировать результаты, оценивать риски, предоставлять рекомендации по выбору стратегий, автоматизировать часть проектных работ.",
        "Системы ИИ применяются только для создания 3D-моделей.",
        "Роль ИИ ограничивается обработкой финансовых отчётов."
      ],
      correctAnswer: 1,
      explanation: "Искусственный интеллект в строительстве обеспечивает интеллектуальную поддержку принятия решений, автоматизацию сложных процессов и повышение эффективности управления проектами.",
      category: "Искусственный интеллект"
    },
    {
      id: 11,
      question: "Что такое реляционная модель данных?",
      options: [
        "Способ организации данных в виде графов.",
        "Способ организации и хранения данных, основанный на математических принципах реляционной алгебры; данные представляются в виде таблиц. Для работы с реляционными базами данных используется язык SQL.",
        "Иерархическая структура данных.",
        "Сетевая модель данных."
      ],
      correctAnswer: 1,
      explanation: "Реляционная модель представляет данные в виде связанных таблиц и использует SQL для выполнения запросов, что обеспечивает эффективное управление информацией.",
      category: "Базы данных"
    },
    {
      id: 12,
      question: "Какие меры используются для обеспечения информационной безопасности?",
      options: [
        "Никаких мер не используется.",
        "Технические меры (шифрование, аутентификация, контроль доступа), архивирование и резервирование информации, создание защитных атрибутов и защищённых сетевых соединений, антивирусная защита, классификация угроз и рисков.",
        "Только установка паролей на компьютеры.",
        "Только физическое ограничение доступа в серверные помещения."
      ],
      correctAnswer: 1,
      explanation: "Информационная безопасность обеспечивается комплексом технических и организационных мер, включающих шифрование, аутентификацию, контроль доступа и защиту от различных угроз.",
      category: "Информационная безопасность"
    },
    {
      id: 13,
      question: "Что такое объектно-ориентированный подход в программировании?",
      options: [
        "Подход, который рассматривает программу как набор команд.",
        "Подход, который рассматривает программу в качестве набора объектов, взаимодействующих между собой. Основные понятия: абстракция, инкапсуляция, наследование, полиморфизм.",
        "Подход, который использует только математические алгоритмы.",
        "Подход, основанный на использовании только готовых библиотек."
      ],
      correctAnswer: 1,
      explanation: "Объектно-ориентированное программирование основано на концепции объектов и классов, что позволяет создавать более структурированный и поддерживаемый код.",
      category: "Программирование"
    },
    {
      id: 14,
      question: "Что такое локальная сеть и как она организуется?",
      options: [
        "Сеть, которая объединяет компьютеры в разных странах.",
        "Сеть, которая состоит из ряда элементов, обеспечивающих взаимодействие между компьютерами и другими устройствами; использует систему адресации для идентификации устройств и передачи данных, позволяет совместно использовать ресурсы.",
        "Сеть только для подключения принтеров.",
        "Сеть без использования технологий и средств объединения устройств."
      ],
      correctAnswer: 1,
      explanation: "Локальная сеть объединяет устройства в ограниченной географической области и обеспечивает совместное использование ресурсов и обмен данными между участниками сети.",
      category: "Локальные сети"
    },
    {
      id: 15,
      question: "Как информационная модель облегчает совместную работу участников строительного проекта?",
      options: [
        "Усложняет обмен документацией между участниками.",
        "Обеспечивает доступ всех участников проекта к актуальным данным, способствует согласованности решений и снижению количества ошибок, улучшает координацию между различными этапами проекта, сокращает время на обмен документацией.",
        "Ограничивает доступ к проектной документации.",
        "Не влияет на процесс совместной работы."
      ],
      correctAnswer: 1,
      explanation: "Единая информационная модель обеспечивает всем участникам проекта доступ к актуальной информации, что значительно улучшает координацию работ и снижает количество ошибок.",
      category: "Совместная работа"
    },
    {
      id: 16,
      question: "Как осуществляется сбор и хранение информации в строительном проекте?",
      options: [
        "Сбор данных происходит только на этапе проектирования, хранение осуществляется исключительно на бумажных носителях.",
        "На всех этапах жизненного цикла объекта собираются данные о конструкции, материалах, инженерных системах, сроках, затратах и других параметрах; данные структурируются и вносятся в информационную модель, хранятся в базах данных и системах управления базами данных.",
        "Информация собирается только от заказчика, хранение осуществляется в облачных сервисах.",
        "Сбор и хранение информации не являются частью строительного проекта."
      ],
      correctAnswer: 1,
      explanation: "Сбор и хранение информации в строительстве — это непрерывный процесс, охватывающий все этапы жизненного цикла объекта с использованием современных информационных систем.",
      category: "Управление данными"
    },
    {
      id: 17,
      question: "Какие методы используются для обработки информации в строительстве?",
      options: [
        "Только ручной метод.",
        "Использование баз данных и систем управления базами данных, облачных вычислений, интеллектуальных алгоритмов и систем для анализа данных, автоматизированных систем управления.",
        "Только методы, основанные на использовании глобальных сетей.",
        "Методы, не связанные с использованием компьютерных технологий."
      ],
      correctAnswer: 1,
      explanation: "Современные методы обработки информации в строительстве включают широкий спектр автоматизированных и интеллектуальных технологий для эффективного управления данными.",
      category: "Обработка информации"
    },
    {
      id: 18,
      question: "Как обеспечивается передача информации между участниками строительного проекта?",
      options: [
        "Исключительно через бумажные документы.",
        "С помощью единой информационной модели, которая обеспечивает доступ всех участников проекта к актуальным данным, и информационных систем, которые позволяют обмениваться данными и координировать работу.",
        "Через личные встречи без использования технических средств.",
        "Передача информации не требуется в строительном проекте."
      ],
      correctAnswer: 1,
      explanation: "Современная передача информации в строительных проектах основана на использовании единых информационных моделей и автоматизированных систем обмена данными.",
      category: "Информационный обмен"
    },
    {
      id: 19,
      question: "В чём роль информационных технологий в координации строительных работ?",
      options: [
        "Они не играют никакой роли.",
        "Они позволяют автоматизировать процессы проектирования и управления, улучшить координацию между участниками и этапами проекта, обеспечить согласованность действий, ускорить обмен документацией и согласование решений, снизить риск ошибок и нестыковок.",
        "Информационные технологии используются только для создания чертежей.",
        "Их роль ограничивается хранением данных."
      ],
      correctAnswer: 1,
      explanation: "Информационные технологии играют ключевую роль в координации строительных работ, обеспечивая автоматизацию, улучшенную коммуникацию и снижение рисков.",
      category: "ИТ в строительстве"
    },
    {
      id: 20,
      question: "Что такое автоматизация проектирования и управления в строительстве?",
      options: [
        "Процесс ручного составления проектной документации.",
        "Применение компьютерных программ и систем для автоматизации процессов проектирования, расчёта конструкций, планирования работ, управления ресурсами и т. д.",
        "Использование только архитектурных программ для визуализации зданий.",
        "Система, не связанная с проектированием и управлением."
      ],
      correctAnswer: 1,
      explanation: "Автоматизация в строительстве представляет собой комплексное применение компьютерных технологий для оптимизации всех этапов строительного процесса.",
      category: "Автоматизация проектирования"
    },
    {
      id: 21,
      question: "Какие системы используются для автоматизации проектирования?",
      options: [
        "Системы, предназначенные только для расчёта нагрузки на фундамент.",
        "Системы автоматизации проектирования, которые позволяют создавать информационные модели объектов капитального строительства, включающие данные о конструкции, материалах, инженерных системах и других параметрах.",
        "Системы, связанные исключительно с управлением персоналом.",
        "Системы, не имеющие отношения к проектированию."
      ],
      correctAnswer: 1,
      explanation: "САПР в строительстве включают системы для создания полных информационных моделей объектов с интеграцией всех необходимых проектных данных.",
      category: "САПР"
    },
    {
      id: 22,
      question: "Что такое базы данных и как они применяются в строительстве?",
      options: [
        "Базы данных — это физические хранилища документов; в строительстве они не применяются.",
        "Базы данных — это инструменты для хранения и обработки информации; в строительстве они используются для управления данными о проектах, материалах, затратах, для автоматизации обработки информации, ускорения поиска необходимых данных и повышения эффективности работы с информацией.",
        "Базы данных используются только для хранения личных данных сотрудников.",
        "Базы данных применяются исключительно в IT-компаниях."
      ],
      correctAnswer: 1,
      explanation: "Базы данных в строительстве обеспечивают централизованное управление всей проектной и производственной информацией, значительно повышая эффективность работы.",
      category: "Базы данных"
    },
    {
      id: 23,
      question: "Как системы управления базами данных помогают в строительных проектах?",
      options: [
        "Не играют никакой роли.",
        "Позволяют автоматизировать обработку информации, ускорить поиск необходимых данных, повысить эффективность работы с информацией, обеспечить актуальность и синхронизацию данных между участниками проекта.",
        "Используются только для резервного копирования данных.",
        "Применяются исключительно для архивирования."
      ],
      correctAnswer: 1,
      explanation: "СУБД обеспечивают эффективное управление информацией в строительных проектах, гарантируя быстрый доступ к данным и их актуальность для всех участников.",
      category: "СУБД"
    },
    {
      id: 24,
      question: "Как информационные системы способствуют повышению эффективности строительных работ?",
      options: [
        "Они не оказывают никакого влияния на процесс строительства.",
        "Позволяют автоматизировать обработку информации, ускорить поиск необходимых данных, улучшить координацию между подразделениями и участниками проекта, интегрировать различные бизнес-процессы, обеспечить доступ всех участников к актуальным данным.",
        "Используются только для хранения архивных документов.",
        "Способствуют только ускорению процесса печати документации."
      ],
      correctAnswer: 1,
      explanation: "Информационные системы комплексно повышают эффективность строительства через автоматизацию, улучшенную координацию и интеграцию всех процессов.",
      category: "Информационные системы"
    },
    {
      id: 25,
      question: "Какие методы используются для принятия управленческих решений в строительстве?",
      options: [
        "Только традиционные методы без применения технологий.",
        "Системный анализ, оптимизация методов и процессов, использование интеллектуальных технологий и систем искусственного интеллекта для анализа данных и предоставления рекомендаций, диалоговый режим работы с вычислительными системами.",
        "Исключительно методы, основанные на личном опыте руководителей.",
        "Методы, не предполагающие анализа данных."
      ],
      correctAnswer: 1,
      explanation: "Современные методы принятия решений в строительстве основаны на системном анализе, оптимизации и использовании интеллектуальных технологий для обработки больших объемов данных.",
      category: "Управленческие решения"
    },
    {
      id: 26,
      question: "Как интеллектуальная поддержка помогает в принятии решений в технических системах?",
      options: [
        "Не оказывает никакого влияния.",
        "Позволяет анализировать большие объёмы данных, выявлять закономерности, предоставлять рекомендации для оптимизации процессов, прогнозирования результатов, снижения риска ошибок, решения сложных и нетривиальных задач.",
        "Используется только для создания визуализаций.",
        "Помогает только в обработке текстовых данных."
      ],
      correctAnswer: 1,
      explanation: "Интеллектуальная поддержка обеспечивает глубокий анализ данных и помогает принимать обоснованные решения в сложных технических системах.",
      category: "Интеллектуальная поддержка"
    },
    {
      id: 27,
      question: "Что такое корпоративные информационные системы и как они используются в строительстве?",
      options: [
        "Это системы, которые используются только в финансовом секторе.",
        "Это системы, которые обеспечивают сбор, хранение, обработку и распространение информации в рамках организации; в строительстве они позволяют интегрировать бизнес-процессы, улучшить координацию между подразделениями, повысить эффективность работы компании, обеспечить доступ всех участников проекта к актуальным данным.",
        "Они применяются исключительно для управления персоналом.",
        "Корпоративные информационные системы не используются в строительной отрасли."
      ],
      correctAnswer: 1,
      explanation: "Корпоративные ИС в строительстве обеспечивают комплексную автоматизацию всех бизнес-процессов и улучшают взаимодействие между различными подразделениями и участниками проектов.",
      category: "Корпоративные ИС"
    },
    {
      id: 28,
      question: "Как организуется диалог между человеком и вычислительным комплексом в строительных системах?",
      options: [
        "Диалог не организуется, системы работают автономно.",
        "Через диалоговые системы, где человек и вычислительный комплекс взаимодействуют итеративно, уточняя и корректируя параметры задачи до достижения желаемого результата.",
        "Только через текстовые команды без обратной связи.",
        "С помощью физических кнопок и переключателей без использования программного обеспечения."
      ],
      correctAnswer: 1,
      explanation: "Диалоговые системы обеспечивают интерактивное взаимодействие пользователя с вычислительными системами, позволяя итеративно улучшать результаты.",
      category: "Диалоговые системы"
    },
    {
      id: 29,
      question: "Как базы знаний применяются в строительных информационных системах?",
      options: [
        "Базы знаний не используются в строительстве.",
        "Они используются для хранения и обработки специализированной информации, которая помогает в принятии решений, оптимизации процессов, анализе проектных и строительных решений, обеспечивают быстрый доступ к накопленным знаниям и опыту.",
        "Применяются только для хранения справочной информации о строительных материалах.",
        "Базы знаний используются исключительно для обучения новых сотрудников."
      ],
      correctAnswer: 1,
      explanation: "Базы знаний в строительстве содержат экспертные знания и помогают в принятии квалифицированных решений на основе накопленного опыта.",
      category: "Базы знаний"
    },
    {
      id: 30,
      question: "Какие средства используются для описания сценария диалога в строительных системах?",
      options: [
        "Сценарий диалога не описывается, системы работают по фиксированным алгоритмам.",
        "Используются средства описания сценариев, которые позволяют формализовать взаимодействие между человеком и вычислительным комплексом, определить шаги диалога, критерии эффективности, форматы обмена данными.",
        "Только графические схемы без текстового описания.",
        "Средства, не предполагающие формализации и структурирования диалога."
      ],
      correctAnswer: 1,
      explanation: "Формализованные средства описания сценариев диалога обеспечивают структурированное и эффективное взаимодействие пользователей с информационными системами.",
      category: "Сценарии диалога"
    },
    {
      id: 31,
      question: "Перечислите основные компоненты сетевой операционной системы.",
      options: [
        "Только средства управления файлами.",
        "Средства обеспечения взаимодействия между компьютерами, управления ресурсами и обмена данными, средства управления процессами, памятью, файлами и обработки сигналов.",
        "Исключительно инструменты для работы с периферийными устройствами.",
        "Компоненты, не связанные с управлением ресурсами и обменом данными."
      ],
      correctAnswer: 1,
      explanation: "Сетевые операционные системы включают комплекс средств для управления всеми ресурсами сети и обеспечения взаимодействия между устройствами.",
      category: "Сетевые ОС"
    },
    {
      id: 32,
      question: "Какие базовые топологии сетей существуют?",
      options: [
        "Топология сети не имеет значения для её работы.",
        "Существуют различные базовые топологии, которые определяют способ соединения устройств в сети и влияют на её характеристики (надёжность, скорость передачи данных, удобство управления).",
        "Существует только одна универсальная топология для всех сетей.",
        "Топология определяется исключительно количеством устройств в сети."
      ],
      correctAnswer: 1,
      explanation: "Базовые топологии сетей (звезда, шина, кольцо, mesh) определяют физическую и логическую структуру сети и влияют на её производительность и надежность.",
      category: "Топологии сетей"
    },
    {
      id: 33,
      question: "Как устроена передача информации в компьютерных сетях?",
      options: [
        "Передача информации происходит без использования каких-либо протоколов и систем адресации.",
        "Используются компьютерные сети (локальные и глобальные), различные протоколы и технологии передачи данных, системы адресации для идентификации устройств и обеспечения передачи данных.",
        "Информация передаётся только через физические носители.",
        "Передача данных возможна только в пределах одного здания."
      ],
      correctAnswer: 1,
      explanation: "Передача информации в сетях основана на использовании протоколов, систем адресации и различных технологий для обеспечения надежного обмена данными.",
      category: "Передача данных"
    },
    {
      id: 34,
      question: "Что такое сервисы и службы управления в информационных системах?",
      options: [
        "Это элементы, которые не влияют на работу системы.",
        "Это компоненты, которые обеспечивают управление ресурсами и процессами, безопасность и надёжность работы системы, взаимодействие между компонентами и пользователями.",
        "Сервисы и службы управления нужны только для глобальных сетей.",
        "Они отвечают только за хранение данных."
      ],
      correctAnswer: 1,
      explanation: "Сервисы и службы управления являются критически важными компонентами ИС, обеспечивающими все аспекты функционирования системы.",
      category: "Сервисы управления"
    },
    {
      id: 35,
      question: "Какие операционные системы используются в вычислительных системах строительства?",
      options: [
        "В строительстве не используются операционные системы.",
        "Могут использоваться как универсальные операционные системы, так и операционные системы специального назначения, в зависимости от задач и конфигурации вычислительных систем.",
        "Только операционные системы специального назначения.",
        "Только универсальные операционные системы."
      ],
      correctAnswer: 1,
      explanation: "В строительстве применяются различные типы ОС: от универсальных для общих задач до специализированных для конкретных инженерных расчетов.",
      category: "ОС в строительстве"
    },
    {
      id: 36,
      question: "Как строятся базы данных в рамках деятельности предприятий строительной отрасли?",
      options: [
        "Базы данных в строительстве не используются.",
        "Строятся с учётом необходимости хранения данных о проектах, материалах, затратах, используются для автоматизации обработки информации, ускорения поиска данных и повышения эффективности работы с информацией.",
        "Базы данных применяются только для хранения личных данных сотрудников.",
        "Строятся без учёта специфики строительной отрасли."
      ],
      correctAnswer: 1,
      explanation: "БД в строительстве проектируются с учетом специфики отрасли: управление проектами, материалами, ресурсами, документооборотом и другими отраслевыми процессами.",
      category: "БД в строительстве"
    },
    {
      id: 37,
      question: "В чём особенность построения вычислительных систем для строительных задач?",
      options: [
        "Вычислительные системы для строительства не имеют особенностей.",
        "Учитываются специфические требования и задачи строительной отрасли, например, необходимость работы с информационными моделями объектов, большими объёмами данных, интеграцией различных систем (проектирования, управления ресурсами, документооборота).",
        "Системы строятся исключительно на основе облачных технологий.",
        "Построение систем не учитывает особенности строительных проектов."
      ],
      correctAnswer: 1,
      explanation: "Вычислительные системы для строительства должны обрабатывать специфические данные (BIM-модели, инженерные расчеты) и интегрировать различные отраслевые системы.",
      category: "ВС для строительства"
    },
    {
      id: 38,
      question: "Что включает в себя общая теория построения ЭВМ?",
      options: [
        "Только принципы работы оперативной памяти.",
        "Архитектуру компьютерных сетей, принципы передачи и обмена информацией между ЭВМ и периферийными устройствами, основные операции над сигналами в периферийных устройствах, модели архитектур информационных систем, структуру ЭВМ, а также развитие и совершенствование структуры ЭВМ.",
        "Только архитектуру компьютерных сетей.",
        "Только модели архитектурных решений для глобальных сетей."
      ],
      correctAnswer: 1,
      explanation: "Общая теория построения ЭВМ охватывает все аспекты архитектуры и функционирования компьютерных систем, включая аппаратные и программные компоненты.",
      category: "Теория ЭВМ"
    },
    {
      id: 39,
      question: "Перечислите ключевые аспекты архитектуры компьютерных сетей.",
      options: [
        "Только элементы сети.",
        "Элементы сети, средства объединения устройств, системы адресации, механизмы управления, структура глобальных сетей.",
        "Только механизмы управления.",
        "Только средства объединения устройств."
      ],
      correctAnswer: 1,
      explanation: "Архитектура компьютерных сетей включает все компоненты и механизмы, необходимые для обеспечения эффективного взаимодействия устройств в сети.",
      category: "Архитектура сетей"
    },
    {
      id: 40,
      question: "Что такое базовая топология сети и какова её роль в архитектуре компьютерных сетей?",
      options: [
        "Топология сети — это способ соединения устройств в сети, который не влияет на её характеристики.",
        "Топология сети — это один из ключевых аспектов архитектуры компьютерных сетей, который определяет способ соединения устройств и влияет на надёжность, скорость передачи данных и удобство управления сетью.",
        "Топология сети определяет только физическое расположение устройств.",
        "Топология сети не имеет значения для работы сети."
      ],
      correctAnswer: 1,
      explanation: "Топология является фундаментальным аспектом сетевой архитектуры, определяющим производительность, надежность и масштабируемость сети.",
      category: "Топология сетей"
    },
    {
      id: 41,
      question: "Какие компоненты включает в себя локальная сеть?",
      options: [
        "Только компьютеры.",
        "Ряд элементов, которые обеспечивают взаимодействие между компьютерами и другими устройствами, систему адресации для идентификации устройств и передачи данных.",
        "Только систему адресации.",
        "Только периферийные устройства."
      ],
      correctAnswer: 1,
      explanation: "Локальная сеть состоит из множества компонентов: активного сетевого оборудования, кабельной системы, протоколов и систем адресации для обеспечения связи.",
      category: "Компоненты ЛВС"
    },
    {
      id: 42,
      question: "Как устроена система адресации в локальных и глобальных сетях?",
      options: [
        "В локальных и глобальных сетях используется одна и та же система адресации.",
        "В локальных сетях используется специальная система адресации для идентификации устройств, а в глобальных сетях существует своя система адресации, которая позволяет устройствам обмениваться данными на международном уровне.",
        "Системы адресации не используются в сетях.",
        "Адресация нужна только для глобальных сетей."
      ],
      correctAnswer: 1,
      explanation: "Локальные сети используют MAC-адреса и локальные IP-адреса, а глобальные сети — глобальные IP-адреса и системы доменных имен для идентификации устройств.",
      category: "Адресация в сетях"
    },
    {
      id: 43,
      question: "Что обеспечивают сетевые операционные системы в архитектуре компьютерных сетей?",
      options: [
        "Только управление файлами.",
        "Взаимодействие между компьютерами, управление ресурсами и обмен данными между устройствами в сети.",
        "Только защиту от вирусов.",
        "Ничего не обеспечивают."
      ],
      correctAnswer: 1,
      explanation: "Сетевые ОС являются основой функционирования сети, обеспечивая все аспекты сетевого взаимодействия и управления распределенными ресурсами.",
      category: "Сетевые ОС"
    },
    {
      id: 44,
      question: "Какие механизмы используются для управления сетью и обеспечения её безопасности?",
      options: [
        "Никаких механизмов не используется.",
        "Различные механизмы и инструменты для контроля и оптимизации работы сети, обеспечения её безопасности и надёжности.",
        "Только маршрутизаторы.",
        "Только файрволы."
      ],
      correctAnswer: 1,
      explanation: "Управление сетью включает мониторинг, маршрутизацию, балансировку нагрузки, а безопасность — файрволы, системы обнаружения вторжений, шифрование и аутентификацию.",
      category: "Управление сетями"
    },
    {
      id: 45,
      question: "Перечислите основные операции, которые выполняются над сигналами в периферийных устройствах.",
      options: [
        "Операции не выполняются.",
        "Обработка сигналов, поступающих от аппаратного обеспечения и программного обеспечения, координация взаимодействия между ними.",
        "Только усиление сигналов.",
        "Только преобразование сигналов."
      ],
      correctAnswer: 1,
      explanation: "Периферийные устройства выполняют комплексную обработку сигналов: усиление, фильтрацию, преобразование, синхронизацию для обеспечения корректного взаимодействия с системой.",
      category: "Обработка сигналов"
    },
    {
      id: 46,
      question: "Что такое глобальные сети и какие сервисы и протоколы они включают?",
      options: [
        "Глобальные сети — это сети, которые объединяют только компьютеры в одном здании.",
        "Глобальные сети имеют сложную архитектуру, которая включает различные сервисы и протоколы для обеспечения работы Интернета и других глобальных сервисов.",
        "Глобальные сети не используют протоколы.",
        "Глобальные сети включают только один сервис."
      ],
      correctAnswer: 1,
      explanation: "Глобальные сети объединяют компьютеры по всему миру и используют множество протоколов (TCP/IP, HTTP, FTP) и сервисов для обеспечения международной связи.",
      category: "Глобальные сети"
    },
    {
      id: 47,
      question: "Какие модели архитектур информационных систем существуют?",
      options: [
        "Существует только одна модель архитектуры.",
        "Модели, которые определяют структуру и взаимодействие компонентов, например, реляционные базы данных, иерархические и сетевые системы.",
        "Модели архитектур не существуют.",
        "Только иерархические системы."
      ],
      correctAnswer: 1,
      explanation: "Существуют различные модели архитектур ИС: клиент-серверная, многоуровневая, сервис-ориентированная, микросервисная, каждая с своими преимуществами для разных задач.",
      category: "Модели архитектур"
    },
    {
      id: 48,
      question: "Какие функции выполняют сервисы и службы управления в информационных системах?",
      options: [
        "Никаких функций не выполняют.",
        "Управление ресурсами и процессами, обеспечение безопасности и надёжности работы системы, взаимодействие между компонентами и пользователями.",
        "Только хранение данных.",
        "Только обработку запросов."
      ],
      correctAnswer: 1,
      explanation: "Сервисы управления обеспечивают мониторинг, администрирование, безопасность, балансировку нагрузки и другие критически важные функции для стабильной работы ИС.",
      category: "Функции сервисов"
    },
    {
      id: 49,
      question: "Каковы основные функции операционных систем?",
      options: [
        "Только запуск программ.",
        "Управление процессами, управление памятью, управление файлами, обработка сигналов, обеспечение интерфейса для взаимодействия пользователя с компьютером, координация работы аппаратных и программных компонентов компьютера.",
        "Только обеспечение интерфейса для пользователя.",
        "Только управление памятью."
      ],
      correctAnswer: 1,
      explanation: "ОС выполняет множество критически важных функций: от низкоуровневого управления ресурсами до предоставления пользовательского интерфейса и координации всех компонентов системы.",
      category: "Функции ОС"
    },
    {
      id: 50,
      question: "Чем отличаются универсальные операционные системы от операционных систем специального назначения?",
      options: [
        "Универсальные ОС предназначены только для серверов, а ОС специального назначения — для персональных компьютеров.",
        "Универсальные ОС предназначены для широкого круга пользователей и применяются в различных сферах, а ОС специального назначения разрабатываются для решения конкретных задач или работы на определённых типах оборудования.",
        "Универсальные ОС работают только на определённых аппаратных платформах, а ОС специального назначения — на любых.",
        "Отличие заключается только в интерфейсе."
      ],
      correctAnswer: 1,
      explanation: "Универсальные ОС (Windows, Linux) подходят для широкого спектра задач, а специализированные (RTOS, встроенные ОС) оптимизированы для конкретных применений.",
      category: "Типы ОС"
    },
    {
      id: 51,
      question: "Какие аспекты учитываются при разработке операционных систем?",
      options: [
        "Только управление процессами.",
        "Управление процессами, памятью, файлами, обработка сигналов, взаимодействие с аппаратурой, особенности аппаратных платформ, методы построения и архитектуры ОС, возможности работы в сети.",
        "Только взаимодействие с пользователем.",
        "Только защита от вирусов."
      ],
      correctAnswer: 1,
      explanation: "Разработка ОС — комплексный процесс, учитывающий все аспекты функционирования компьютерной системы от аппаратного уровня до пользовательского интерфейса.",
      category: "Разработка ОС"
    },
    {
      id: 52,
      question: "Какие технологии и инструменты программирования используются для разработки программного обеспечения?",
      options: [
        "Только текстовые редакторы.",
        "Среды разработки (например, Microsoft Visual Studio), компиляторы и интерпретаторы, библиотеки и пакеты стандартных программ, языки программирования высокого уровня (например, C++, Visual Basic, Visual C#).",
        "Только калькуляторы.",
        "Только онлайн-сервисы для создания презентаций."
      ],
      correctAnswer: 1,
      explanation: "Современная разработка ПО использует комплексный инструментарий: IDE, компиляторы, отладчики, системы контроля версий, фреймворки и библиотеки для повышения продуктивности.",
      category: "Инструменты разработки"
    },
    {
      id: 53,
      question: "Как используются базы данных и системы управления базами данных в информационных системах?",
      options: [
        "Базы данных нужны только для хранения фотографий. СУБД используются только в мобильных приложениях.",
        "Базы данных и СУБД используются для управления информацией, автоматизации обработки данных, ускорения поиска информации, повышения эффективности работы с данными.",
        "Базы данных используются только в библиотеках. СУБД нужны только для видеоигр.",
        "Базы данных применяются только в научных исследованиях. СУБД используются только в государственных учреждениях."
      ],
      correctAnswer: 1,
      explanation: "БД и СУБД являются основой современных информационных систем, обеспечивая надежное хранение, быстрый поиск и эффективную обработку больших объемов данных.",
      category: "БД и СУБД"
    },
    {
      id: 54,
      question: "Как интеллектуальные алгоритмы помогают в автоматизации проектных работ?",
      options: [
        "Они не оказывают никакого влияния на проектные работы.",
        "Они помогают автоматизировать часть проектных работ, ускорить процесс принятия решений и повысить его качество за счёт более глубокого анализа данных.",
        "Они нужны только для создания 3D-моделей.",
        "Они используются только для расчёта стоимости проекта."
      ],
      correctAnswer: 1,
      explanation: "Интеллектуальные алгоритмы автоматизируют рутинные проектные задачи, оптимизируют проектные решения и помогают принимать обоснованные решения на основе анализа данных.",
      category: "Интеллектуальные алгоритмы"
    },
    {
      id: 55,
      question: "Какие типы данных могут обрабатывать интеллектуальные системы в строительстве?",
      options: [
        "Только числовые данные.",
        "Числовые, текстовые и графические данные.",
        "Только текстовые данные.",
        "Только данные о погодных условиях."
      ],
      correctAnswer: 1,
      explanation: "Современные интеллектуальные системы в строительстве обрабатывают разнообразные типы данных: от численных расчетов до 3D-моделей и текстовой документации.",
      category: "Типы данных в ИИ"
    },
    {
      id: 56,
      question: "Как автоматизированные системы управления помогают оптимизировать строительные процессы?",
      options: [
        "Они никак не влияют на строительные процессы.",
        "Они помогают управлять строительными процессами, ресурсами, документооборотом и другими аспектами проекта, автоматизировать рутинные задачи, повысить эффективность работы, оптимизировать использование материалов, техники и рабочей силы.",
        "Они нужны только для учёта рабочего времени сотрудников.",
        "Они используются только для проектирования зданий."
      ],
      correctAnswer: 1,
      explanation: "АСУ в строительстве обеспечивают комплексную оптимизацию всех процессов: от планирования ресурсов до контроля качества и сроков выполнения работ.",
      category: "АСУ в строительстве"
    },
    {
      id: 57,
      question: "Как системы автоматизации проектирования упрощают создание проектной документации?",
      options: [
        "Они не влияют на процесс создания проектной документации.",
        "Они позволяют упрощать и ускорять процесс создания проектной документации, анализировать проектные решения и визуализировать объекты, создавать информационные модели объектов капитального строительства, которые включают данные о конструкции, материалах, инженерных системах и других параметрах.",
        "Они нужны только для печати чертежей.",
        "Они используются только для создания архитектурных визуализаций."
      ],
      correctAnswer: 1,
      explanation: "САПР автоматизируют весь цикл создания проектной документации: от концептуального проектирования до выпуска рабочих чертежей и спецификаций.",
      category: "САПР в проектировании"
    },
    {
      id: 58,
      question: "Что такое информационное моделирование объектов капитального строительства?",
      options: [
        "Процесс создания физических макетов зданий.",
        "Технология, которая позволяет создавать и использовать единую цифровую модель объекта строительства, включающую данные о конструкции, материалах, инженерных системах, сроках и стоимости строительства и другие параметры.",
        "Метод расчёта стоимости строительных материалов.",
        "Система управления строительными рабочими."
      ],
      correctAnswer: 1,
      explanation: "Информационное моделирование создает цифровой двойник объекта, содержащий всю информацию о здании для эффективного управления проектом на всех этапах жизненного цикла.",
      category: "Информационное моделирование"
    },
    {
      id: 59,
      question: "Какие преимущества даёт использование информационного моделирования в строительстве?",
      options: [
        "Увеличение количества бумажной документации.",
        "Обеспечение совместной работы всех участников проекта с единой информационной моделью, повышение точности и скорости принятия решений, сокращение количества ошибок и нестыковок в проекте, улучшение координации между участниками и этапами строительного процесса, возможность анализа и оптимизации объекта на всех этапах его жизненного цикла.",
        "Усложнение процесса согласования проекта.",
        "Ограничение доступа участников проекта к данным об объекте."
      ],
      correctAnswer: 1,
      explanation: "Информационное моделирование обеспечивает прозрачность, координацию и эффективность всех процессов строительного проекта благодаря единому информационному пространству.",
      category: "Преимущества ИМ"
    },
    {
      id: 60,
      question: "Перечислите этапы жизненного цикла объекта капитального строительства.",
      options: [
        "Только проектирование и строительство.",
        "Только эксплуатация и демонтаж.",
        "Проектирование, получение разрешений и согласований, строительство, ввод объекта в эксплуатацию, эксплуатация, реконструкция или модернизация, вывод объекта из эксплуатации и демонтаж.",
        "Только этапы, связанные с проектированием и получением разрешений."
      ],
      correctAnswer: 2,
      explanation: "Жизненный цикл объекта капитального строительства включает все этапы от концепции до утилизации, каждый из которых требует специфического управления информацией.",
      category: "Жизненный цикл объекта"
    }
  ];

  // История тестов
  const [testHistory, setTestHistory] = useState<TestResult[]>([
    {
      id: 1,
      date: "2024-01-15",
      score: 12,
      totalQuestions: 15,
      category: "Информационные технологии в строительстве",
      timeSpent: 18
    },
    {
      id: 2,
      date: "2024-01-14",
      score: 10,
      totalQuestions: 12,
      category: "BIM-технологии",
      timeSpent: 15
    },
    {
      id: 3,
      date: "2024-01-13",
      score: 14,
      totalQuestions: 15,
      category: "Управление данными",
      timeSpent: 20
    }
  ]);

  // Статистика
  const totalTests = testHistory.length;
  const avgScore = testHistory.reduce((sum, test) => sum + (test.score / test.totalQuestions * 100), 0) / totalTests;
  const bestScore = Math.max(...testHistory.map(test => test.score / test.totalQuestions * 100));

  // Функция начала теста
  const startTest = () => {
    setCurrentView('test');
    setCurrentQuestionIndex(0);
    setSelectedAnswers([]);
    setShowResults(false);
    setTestStartTime(Date.now());
    setCurrentAnswer(null);
  };

  // Функция ответа на вопрос
  const handleAnswer = (answerIndex: number) => {
    setCurrentAnswer(answerIndex);
  };

  // Функция перехода к следующему вопросу
  const nextQuestion = () => {
    if (currentAnswer !== null) {
      const newAnswers = [...selectedAnswers];
      newAnswers[currentQuestionIndex] = currentAnswer;
      setSelectedAnswers(newAnswers);

      if (currentQuestionIndex < questions.length - 1) {
        setCurrentQuestionIndex(currentQuestionIndex + 1);
        setCurrentAnswer(null);
      } else {
        finishTest(newAnswers);
      }
    }
  };

  // Функция завершения теста
  const finishTest = (answers: number[]) => {
    const score = answers.reduce((total, answer, index) => {
      return total + (answer === questions[index].correctAnswer ? 1 : 0);
    }, 0);

    const timeSpent = Math.round((Date.now() - testStartTime) / 1000 / 60);
    
    const newResult: TestResult = {
      id: Date.now(),
      date: new Date().toISOString().split('T')[0],
      score,
      totalQuestions: questions.length,
      category: "Информационные технологии в строительстве",
      timeSpent
    };

    setTestHistory([newResult, ...testHistory]);
    setCurrentView('results');
    setShowResults(true);
  };

  // Функция возврата к дашборду
  const backToDashboard = () => {
    setCurrentView('dashboard');
    setShowResults(false);
  };

  // Рендер дашборда
  const renderDashboard = () => (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
      <div className="max-w-6xl mx-auto">
        {/* Заголовок */}
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold text-gray-900 mb-2">
            Подготовка к экзамену по информационным технологиям в строительстве
          </h1>
          <p className="text-lg text-gray-600">
            Проверьте свои знания и отслеживайте прогресс
          </p>
        </div>

        {/* Статистика */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <Card className="text-center">
            <CardHeader>
              <CardTitle className="flex items-center justify-center gap-2">
                <Icon name="Target" size={24} className="text-primary" />
                Средний балл
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-3xl font-bold text-primary">
                {avgScore.toFixed(1)}%
              </div>
            </CardContent>
          </Card>

          <Card className="text-center">
            <CardHeader>
              <CardTitle className="flex items-center justify-center gap-2">
                <Icon name="Trophy" size={24} className="text-yellow-500" />
                Лучший результат
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-3xl font-bold text-yellow-500">
                {bestScore.toFixed(1)}%
              </div>
            </CardContent>
          </Card>

          <Card className="text-center">
            <CardHeader>
              <CardTitle className="flex items-center justify-center gap-2">
                <Icon name="BookOpen" size={24} className="text-green-500" />
                Тестов пройдено
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="text-3xl font-bold text-green-500">
                {totalTests}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Кнопка начала теста */}
        <div className="text-center mb-8">
          <Button onClick={startTest} size="lg" className="px-12 py-4 text-lg">
            <Icon name="Play" size={24} className="mr-2" />
            Начать тест ({questions.length} вопросов)
          </Button>
        </div>

        {/* История тестов */}
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Icon name="History" size={24} />
              История тестов
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {testHistory.map((test) => (
                <div key={test.id} className="flex items-center justify-between p-4 border rounded-lg">
                  <div className="flex items-center gap-4">
                    <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center">
                      <Icon name="FileText" size={20} className="text-primary" />
                    </div>
                    <div>
                      <div className="font-medium">{test.category}</div>
                      <div className="text-sm text-gray-500">{test.date}</div>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="font-bold text-lg">
                      {test.score}/{test.totalQuestions}
                    </div>
                    <div className="text-sm text-gray-500">
                      {test.timeSpent} мин
                    </div>
                  </div>
                  <Badge variant={test.score / test.totalQuestions >= 0.8 ? "default" : "secondary"}>
                    {((test.score / test.totalQuestions) * 100).toFixed(0)}%
                  </Badge>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );

  // Рендер теста
  const renderTest = () => {
    const currentQuestion = questions[currentQuestionIndex];
    const progress = ((currentQuestionIndex + 1) / questions.length) * 100;

    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
        <div className="max-w-4xl mx-auto">
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between mb-4">
                <Button variant="outline" onClick={backToDashboard}>
                  <Icon name="ArrowLeft" size={20} className="mr-2" />
                  Назад
                </Button>
                <Badge variant="secondary">
                  {currentQuestionIndex + 1} из {questions.length}
                </Badge>
              </div>
              <Progress value={progress} className="mb-4" />
              <div className="mb-2">
                <Badge variant="outline" className="text-xs">
                  {currentQuestion.category}
                </Badge>
              </div>
              <CardTitle className="text-xl leading-relaxed">
                {currentQuestion.question}
              </CardTitle>
            </CardHeader>
            <CardContent>
              <RadioGroup value={currentAnswer?.toString()} onValueChange={(value) => handleAnswer(parseInt(value))}>
                <div className="space-y-4">
                  {currentQuestion.options.map((option, index) => (
                    <div key={index} className="flex items-start space-x-3">
                      <RadioGroupItem value={index.toString()} id={`option-${index}`} className="mt-1" />
                      <Label htmlFor={`option-${index}`} className="cursor-pointer text-base flex-1 p-3 rounded-lg hover:bg-gray-50 leading-relaxed">
                        {option}
                      </Label>
                    </div>
                  ))}
                </div>
              </RadioGroup>
              
              <div className="mt-8 flex justify-end">
                <Button 
                  onClick={nextQuestion} 
                  disabled={currentAnswer === null}
                  size="lg"
                >
                  {currentQuestionIndex === questions.length - 1 ? 'Завершить тест' : 'Следующий'}
                  <Icon name="ArrowRight" size={20} className="ml-2" />
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    );
  };

  // Рендер результатов
  const renderResults = () => {
    const score = selectedAnswers.reduce((total, answer, index) => {
      return total + (answer === questions[index].correctAnswer ? 1 : 0);
    }, 0);
    const percentage = (score / questions.length) * 100;

    return (
      <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
        <div className="max-w-4xl mx-auto">
          {/* Результаты теста */}
          <Card className="mb-8">
            <CardHeader className="text-center">
              <CardTitle className="text-2xl">Результаты теста</CardTitle>
            </CardHeader>
            <CardContent className="text-center">
              <div className="text-6xl font-bold text-primary mb-4">
                {percentage.toFixed(0)}%
              </div>
              <div className="text-xl text-gray-600 mb-6">
                {score} из {questions.length} правильных ответов
              </div>
              <Button onClick={backToDashboard} size="lg">
                <Icon name="Home" size={20} className="mr-2" />
                Вернуться к дашборду
              </Button>
            </CardContent>
          </Card>

          {/* Разбор ответов */}
          <Card>
            <CardHeader>
              <CardTitle>Разбор ответов</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-6">
                {questions.map((question, index) => {
                  const userAnswer = selectedAnswers[index];
                  const isCorrect = userAnswer === question.correctAnswer;
                  
                  return (
                    <div key={question.id} className="border-b pb-6 last:border-b-0">
                      <div className="flex items-start gap-3 mb-3">
                        <Badge variant={isCorrect ? "default" : "destructive"}>
                          {index + 1}
                        </Badge>
                        <div className="flex-1">
                          <div className="mb-2">
                            <Badge variant="outline" className="text-xs mb-2">
                              {question.category}
                            </Badge>
                          </div>
                          <h3 className="font-medium mb-3 leading-relaxed">{question.question}</h3>
                          <div className="space-y-2">
                            {question.options.map((option, optionIndex) => (
                              <div 
                                key={optionIndex}
                                className={`p-3 rounded-lg border text-sm leading-relaxed ${
                                  optionIndex === question.correctAnswer 
                                    ? 'bg-green-50 border-green-200' 
                                    : optionIndex === userAnswer && !isCorrect
                                    ? 'bg-red-50 border-red-200'
                                    : 'bg-gray-50 border-gray-200'
                                }`}
                              >
                                <div className="flex items-start gap-2">
                                  {optionIndex === question.correctAnswer && (
                                    <Icon name="Check" size={16} className="text-green-600 mt-0.5 flex-shrink-0" />
                                  )}
                                  {optionIndex === userAnswer && !isCorrect && (
                                    <Icon name="X" size={16} className="text-red-600 mt-0.5 flex-shrink-0" />
                                  )}
                                  <span>{option}</span>
                                </div>
                              </div>
                            ))}
                          </div>
                          <div className="mt-3 p-3 bg-blue-50 rounded-lg">
                            <div className="flex items-start gap-2">
                              <Icon name="Info" size={16} className="text-blue-600 mt-0.5 flex-shrink-0" />
                              <div className="text-sm">
                                <strong className="text-blue-900">Объяснение:</strong>
                                <div className="text-blue-800 leading-relaxed">{question.explanation}</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    );
  };

  // Основной рендер
  return (
    <>
      {currentView === 'dashboard' && renderDashboard()}
      {currentView === 'test' && renderTest()}
      {currentView === 'results' && renderResults()}
    </>
  );
};

export default Index;